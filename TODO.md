# TODO

## 방향

- `kmsg`의 핵심 사용 시나리오(`read`, `send`)를 더 빠르고 안정적으로 유지합니다.
- 자동화/연동 환경에서 바로 활용할 수 있는 형태를 우선합니다.

## 우선순위 기준

- `P0`: 핵심 사용성/안정성에 직접 영향
- `P1`: 읽기 품질 및 데이터 표현 개선
- `P2`: 기능 확장

## Backlog

- [ ] `[P0]` imsg 와 비슷한 방식의 watch(streaming mode) 지원
  - 목표: 특정 채팅방에서 신규 메시지를 연속 스트리밍으로 확인
  - 완료 기준:
    - `kmsg watch "<채팅방>"` 명령 제공
    - 신규 메시지 발생 시 즉시 출력
    - `--json` 출력 모드 지원

- [ ] `[P0]` read 명령어의 채팅방 선택 정확도 향상
  - 목표: 검색 결과가 있어도 `SEARCH_MISS`가 발생하는 케이스 감소
  - 완료 기준:
    - 공백/호칭/부분 일치 케이스 매칭 개선
    - 실제 재현 로그 기반 회귀 테스트 케이스 정리

- [ ] `[P0]` 속도 및 안정성 개선
  - 목표: 기본 경로 속도 개선과 실패 복구 신뢰성 향상
  - 완료 기준:
    - fast/deep recovery 경로 동작 기준 정리
    - 기본 명령의 평균 대기 시간과 실패율 모니터링 기준 정의

- [ ] `[P1]` 이미지 읽지 못하는 문제 개선
  - 목표: 이미지 메시지에서 사용자에게 유의미한 정보 제공
  - 완료 기준:
    - 이미지 메시지에서 메타데이터(링크/설명/대체 텍스트) 추출 경로 추가
    - 추출 불가 시 fallback 텍스트 출력

- [ ] `[P1]` 메시지 날짜 포맷 개선
  - 목표: 사람이 보기 쉽고 기계가 파싱하기 쉬운 시간 정보 제공
  - 완료 기준:
    - `read --json`의 시간 필드 포맷 정책 수립
    - 로케일(오전/오후, 24시간제) 차이 대응 규칙 정리

- [ ] `[P2]` 이미지 및 파일 발송 지원
  - 목표: 텍스트 외 첨부 발송 자동화 지원
  - 완료 기준:
    - `send` 확장 플래그 설계(`--image`, `--file` 등)
    - 경로 검증/실패 메시지 정책 정의

## 참고

- 디버깅 시 `kmsg inspect --window 0 --depth 20` + `--trace-ax` 로그를 함께 수집합니다.
- 개발 요청 시 재현 명령어와 기대/실제 결과를 함께 남기면 분석 속도가 빨라집니다.
